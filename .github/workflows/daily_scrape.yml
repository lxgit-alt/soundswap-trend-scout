name: SoundSwap Daily Scout

on:
  schedule:
    - cron: '14 12 * * *'
  workflow_dispatch:

jobs:
  simple-scout:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install Dependencies
        run: |
          pip install requests

      - name: Run Simple Scout
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          SERPAPI_KEY: ${{ secrets.SERPAPI_KEY }}
        run: |
          python -c "
          import os
          import requests
          from datetime import datetime
          
          # Get webhook from environment or secret
          webhook = os.getenv('DISCORD_WEBHOOK')
          
          if not webhook:
              print('‚ùå DISCORD_WEBHOOK not set')
              exit(1)
          
          # Create simple message
          message = {
              'content': f'üé∏ **SoundSwap Daily Check-in**\\nüìÖ {datetime.now().strftime(\"%Y-%m-%d %H:%M UTC\")}\\n\\n‚úÖ GitHub Actions workflow executed successfully\\nüîó Use \`/outlines [topic]\` for blog outlines\\n\\n*Scheduled run completed*'
          }
          
          # Send to Discord
          try:
              response = requests.post(webhook, json=message)
              if response.status_code == 204:
                  print('‚úÖ Notification sent to Discord')
              else:
                  print(f'‚ö†Ô∏è Discord response: {response.status_code}')
          except Exception as e:
              print(f'‚ùå Failed to send: {e}')
          "